<h1>Action Controllers</h1>

<h2>Introduction</h2>

<p>Action controllers are "controller" part of <a href="http://en.wikipedia.org/wiki/Model-view-controller">Model-View-Controller</a> [wikipedia.org].  They are loaded by the <a href="?p=FrontController">Front Controller</a> when a request to the bootstrap is made.  Every action controller must have at least one action.  An action is simply a method in the action controller class.  Here is an example action controller:</p>

<pre class="prettyprint lang-php">class foobar extends A_Controller_Action {

	public function index($locator) {
		// the default action
	}
	
	public function foo($locator) {
		// do something else
	}
	
	public function _bar() {
		// can't touch 'dis
	}

}
</pre>

<p>The first thing you probably notice is that the class extends the class A_Controller_Action.  That's not necessary, but it does provide several conveniences.  The comes from Skeleton's philosophy.</p>

<p class="devnote">Provide link to skeleton's philosophy</p>

<p>Each action is given the <a href="?p=Locator">Locator</a> object that was passed to the <a href="?p=FrontController">Front Controller</a>.  This provides access to anything inside of the <a href="?p=Locator">Locator</a>, including the <a href="?p=Request">Request</a> and <a href="?p=Response">Response</a> objects, and anything else that was placed inside of it (e.g. Database connection, etc.).</p>

<p>If you create a method called index(), that will be used as the default action if no action is defined in the request.  Tip: you can easily redirect the default action to another action by calling that method, passing the $locator argument.</p>

<p>Any method that begins with an underscore <em>cannot</em> be dispatched to.  This means that it cannot be used as an action.  This means you can create a method not meant to be dispatched to, without making it private.</p>

<h2>Forwarding</h2>

<p class="devnote">Describe forwarding array</p>

<h2>Customization</h2>

<p>Many things laid out here can be customized with A_Controller_Mapper.  See the documentation on <a href="?p=Mapper">Mapper</a>.</p>

<h2>Extending A_Controller_Action</h2>

<p>Extending A_Controller_Action is handy, but by no means necessary.  Here are some of the benifits:</p>

<h3>Convenience Access</h3>

<p>A_Controller_Action provides quick access to often-used items.  For example, the <a href="?p=Request">Request</a> and <a href="?p=Response">Response</a> objects can be accessed from within an action with $this->request and $this->response, respectively.  It also gives quick access to the controller Load helper with the _load() method ($this->_load()).  Note that $this->request and $this->response will not be accessible unless the constructor is called with the Locator, either by not defining a constructor (as in the example above) or with parent::__construct($locator).</p>

<p>_request() is a quick way to get a value from the <a href="?p=Request">Request</a> object, and _response() will set values to the <a href="?p=Response">Response</a> object.</p>

<h3>Other Methods</h3>

<ul>
	<li>_redirect(): outputs a HTTP Locator header to redirect to another URL.</li>
	<li>_forward(): creates a forwarding array</li>
</ul>

<p>For the full list, see the <a href="http://skeletonframework.com/documentation/api/index.html">PHPDocs</a>.</p>

<h2>Other Options</h2>

<p>Either extending A_Controller_Action or not is not your only option.  You can extend your own class to consolidate code common among controllers, or one of Skeleton's other controller classes.</p>

<p class="devnote">List other specialty classes that can be extended</p>

<br /><br />
<hr />
<p class="devnote">The following info should be documented under Mapper</p>
<br /><br />

<p>Customization - You can change the default location and naming of controllers with the A_Controller_Mapper. To change the default directory from <strong>controllers/</strong> to another directory name use the setClassDir($dir) method. To change the default controller class naming scheme to another style use the setClassNaming($class_prefix, $class_transform, $class_suffix) method, which takes a prefix and suffix string, plus a transform function for capitalizatino, etc.. </p>
<p>The constructor and the dispatched method will be passed a Locator object by the Front Controller. This parameter is optional and you may choose to use it or not. </p>  
<p>You can change the name of this default method to anything you want using the A_Controller_Mapper::setDefaultMethod(). All the defaults, such as the name of the request parameters, are configurable. </p>
<p>Customization - You can change the default location and naming of controllers with the A_Controller_Mapper. To change the default method name from <strong>index</strong> to another name use the setClassDir($dir) method. </p>


<h2>Orgainzing Controllers into Sub-Directories</h2>
<p>Typically you would have several Action methods in each controller file. But you don't have to have multiple methods per Action Controller. Skeleton provides a ways in the URL to organize controllers into sub-directories in the controllers directory. Here are the options:</p>
<ul>
    <li>mysite.com/foobar/ loads controllers/foobar.php</li>
    <li>mysite.com/foo_bar/ loads controllers/foo/bar.php</li>
    <li>mysite.com/foo-bar/ loads controllers/foo_bar.php</li>
</ul>

<p>And remember that you can also organize your controllers into module directories, each with its own controllers, models, views sub-directories. See the documenation about Working With URLs. Here are some examples:</p>
<ul>
    <li>mysite.com/admin/foo/ loads admin/controllers/foobar.php</li>
    <li>mysite.com/blog/post/ loads admin/blog/controllers/post.php</li>
</ul>

